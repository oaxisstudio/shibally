# Optional: CLAUDE.md連携ガイド

## 概要

shiballyのhooksは「外側からメッセージを表示する」仕組みですが、CLAUDE.mdに記述を追加することで、**Claude自身の振る舞い**にも健康配慮を反映させることができます。

これはオプション機能です。hooksだけでもshiballyは動作します。

## セットアップ

プロジェクトの `CLAUDE.md`（または `~/.claude/CLAUDE.md`）に以下を追加：

```markdown
## shibally（デジタル健康管理）

このユーザーはshiballyを使用しています。以下を意識してください：

- 長時間のセッションになっている場合、区切りの良いタイミングで休憩を提案してください
- 深夜帯（23:00-05:00）のセッションでは、必要最小限のやりとりで完了することを意識してください
- 「あと1つだけ」のタスク追加を促すのではなく、今のタスクを完了させることを優先してください
- レスポンスの最後に不必要な「他に何かありますか？」を付けないでください
```

## hooksとの違い

| 観点           | hooks（必須）         | CLAUDE.md（オプション）  |
| -------------- | --------------------- | ------------------------ |
| 動作タイミング | セッション開始時/応答完了ごと | セッション中の全やりとり |
| 表示方法       | stderrにメッセージ    | Claudeの応答に反映       |
| 制御           | 決定的（必ず実行）    | 確率的（Claudeの判断）   |
| 効果           | 「気づき」を与える    | Claudeが能動的にケア     |

## カスタマイズ例

### ワーキングペアレント向け

```markdown
- 16:00以降のセッションでは、お迎えの時間を意識してタスクの完了見込みを伝えてください
- 「これは明日でも大丈夫」という判断を積極的にしてください
```

### 集中力管理向け

```markdown
- 1つのセッションで扱うタスクは最大3つまでにしてください
- タスク完了時に「ここで一区切りにしましょう」と提案してください
```
